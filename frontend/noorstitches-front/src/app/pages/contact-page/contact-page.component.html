<div class="container py-5 separacion-header-home">
  <div class="row mb-5">
    <div class="col-12">
      <div class="row p-0 m-0 divider-con-borde">
        <p class="h3 text-morado-intermedio-1 extrabold">Contáctanos</p>
      </div>
    </div>
  </div>

  <div class="row g-5">
    <!-- Información de contacto -->
    <div class="col-lg-5">
      <div class="card border-morado-intermedio-1 rounded-4 h-100">
        <div class="card-body p-4 p-lg-5">
          <h4 class="text-morado-oscuro bold mb-4">
            Estamos aquí para ayudarte
          </h4>
          <p class="text-morado-oscuro mb-5">
            ¿Tienes preguntas sobre nuestros productos de crochet, pedidos
            personalizados o necesitas asistencia? Estamos encantados de
            escucharte.
          </p>

          <div class="mb-4">
            <div class="d-flex mb-3">
              <div
                class="bg-morado-intermedio-1 rounded-circle d-flex align-items-center justify-content-center"
                style="width: 40px; height: 40px; min-width: 40px"
              >
                <mat-icon class="text-blanco">email</mat-icon>
              </div>
              <div class="ms-3">
                <h6 class="text-morado-oscuro bold mb-1">Email</h6>
                <p class="text-morado-oscuro mb-0">
                  noorstitches&#64;gmail.com
                </p>
              </div>
            </div>

            <div class="d-flex mb-3">
              <div
                class="bg-morado-intermedio-1 rounded-circle d-flex align-items-center justify-content-center"
                style="width: 40px; height: 40px; min-width: 40px"
              >
                <mat-icon class="text-blanco">phone</mat-icon>
              </div>
              <div class="ms-3">
                <h6 class="text-morado-oscuro bold mb-1">Teléfono</h6>
                <p class="text-morado-oscuro mb-0">+34 912 345 678</p>
              </div>
            </div>

            <div class="d-flex">
              <div
                class="bg-morado-intermedio-1 rounded-circle d-flex align-items-center justify-content-center"
                style="width: 40px; height: 40px; min-width: 40px"
              >
                <mat-icon class="text-blanco">schedule</mat-icon>
              </div>
              <div class="ms-3">
                <h6 class="text-morado-oscuro bold mb-1">
                  Horario de atención
                </h6>
                <p class="text-morado-oscuro mb-0">
                  Lunes a Viernes: 9:00 - 20:00
                </p>
                <p class="text-morado-oscuro mb-0">Sábados: 10:00 - 14:00</p>
              </div>
            </div>
          </div>

          <!-- Revisar a donde redirigir -->
          <h5 class="text-morado-oscuro medium mt-5 mb-3">Síguenos</h5>
          <div class="d-flex gap-3">
            <a
              href="#"
              class="bg-morado-intermedio-1 text-white rounded-circle d-flex align-items-center justify-content-center"
              style="width: 40px; height: 40px; text-decoration: none"
            >
              <mat-icon>facebook</mat-icon>
            </a>
            <a
              href="#"
              class="bg-morado-intermedio-1 text-white rounded-circle d-flex align-items-center justify-content-center"
              style="width: 40px; height: 40px; text-decoration: none"
            >
              <mat-icon>public</mat-icon>
            </a>
            <a
              href="#"
              class="bg-morado-intermedio-1 text-white rounded-circle d-flex align-items-center justify-content-center"
              style="width: 40px; height: 40px; text-decoration: none"
            >
              <mat-icon>photo_camera</mat-icon>
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Formulario de contacto -->
    <div class="col-lg-7">
      <div class="card border-morado-intermedio-1 rounded-4 h-100">
        <div class="card-body p-4 p-lg-5">
          <h4 class="text-morado-oscuro bold mb-4">Envíanos un mensaje</h4>

          <form [formGroup]="contactForm" (ngSubmit)="enviarEmail()">
            <div class="row g-4">
              <!-- Nombre -->
              <div class="col-md-6">
                <div class="form-floating">
                  <input
                    type="text"
                    class="form-control border-morado-intermedio-1"
                    [class.is-invalid]="contactForm.get('nombre')?.invalid && (contactForm.get('nombre')?.touched || contactForm.get('nombre')?.dirty)"
                    formControlName="nombre"
                    id="nombre"
                    placeholder="Ingresa tu nombre"
                  />
                  <label for="nombre" class="text-morado-oscuro">Nombre</label>
                   @if (contactForm.get('nombre')?.errors?.['required'] && (contactForm.get('nombre')?.touched || contactForm.get('nombre')?.dirty)) {
                        <div class="invalid-feedback">
                            El nombre es obligatorio
                        </div>
                    }
                    @if (contactForm.get('nombre')?.errors?.['pattern']) {
                        <div class="invalid-feedback">
                            Debe tener al menos 2 letras y solo caracteres válidos
                        </div>
                    }
                </div>
              </div>

              <!-- Email -->
              <div class="col-md-6">
                <div class="form-floating">
                  <input
                    type="email"
                    class="form-control border-morado-intermedio-1"
                    [class.is-invalid]="contactForm.get('email')?.invalid && (contactForm.get('email')?.touched || contactForm.get('email')?.dirty)"
                    formControlName="email"
                    id="email"
                    placeholder="Tu email"
                  />
                  <label for="email" class="text-morado-oscuro">Email</label>
                   @if (contactForm.get('email')?.errors?.['required'] && (contactForm.get('email')?.touched || contactForm.get('email')?.dirty)) {
                      <div class="invalid-feedback">
                          El email es obligatorio
                      </div>
                  }
                  @if (contactForm.get('email')?.errors?.['pattern']) {
                      <div class="invalid-feedback">
                          Formato de email inválido
                      </div>
                  }
                </div>
              </div>

              <!-- Asunto -->
              <div class="col-12">
                <div class="form-floating">
                  <input
                    type="text"
                    class="form-control border-morado-intermedio-1"
                    [class.is-invalid]="contactForm.get('asunto')?.invalid && (contactForm.get('asunto')?.touched || contactForm.get('asunto')?.dirty)"
                    formControlName="asunto"
                    id="asunto"
                    placeholder="Asunto"
                  />
                  <label for="asunto" class="text-morado-oscuro">Asunto</label>
                    @if (contactForm.get('asunto')?.errors?.['required'] && (contactForm.get('asunto')?.touched || contactForm.get('asunto')?.dirty)) {
                        <div class="invalid-feedback">
                            El asunto es obligatorio
                        </div>
                    }
                    @if (contactForm.get('asunto')?.errors?.['pattern']) {
                        <div class="invalid-feedback">
                          El asunto debe tener al menos 3 caracteres y solo usar letras, números o signos de puntuación válidos.                        
                        </div>
                    }
                </div>
              </div>

              <!-- Motivo -->
              <div class="col-12">
                <div class="form-floating">
                  <select
                    class="form-select border-morado-intermedio-1"
                    [class.is-invalid]="contactForm.get('motivo')?.invalid && (contactForm.get('motivo')?.touched || contactForm.get('motivo')?.dirty)"
                    formControlName="motivo"
                    id="motivo"
                  >
                    <option selected disabled value="">
                      Selecciona una opción
                    </option>
                    <option value="pedido">Consulta sobre un pedido</option>
                    <option value="producto">Información de producto</option>
                    <option value="personalizado">Pedido personalizado</option>
                    <option value="devoluciones">Devoluciones</option>
                    <option value="otro">Otro motivo</option>
                  </select>
                  <label for="motivo" class="text-morado-oscuro"
                    >Motivo de contacto</label
                  >
                  @if (contactForm.get('motivo')?.errors?.['required'] && (contactForm.get('motivo')?.touched || contactForm.get('motivo')?.dirty)) {
                      <div class="invalid-feedback">
                          El motivo de contacto es obligatorio
                      </div>
                  }
                </div>
              </div>

              <!-- Mensaje -->
              <div class="col-12">
                <div class="form-floating">
                  <textarea
                    class="form-control border-morado-intermedio-1"
                    [class.is-invalid]="contactForm.get('mensaje')?.invalid && (contactForm.get('mensaje')?.touched || contactForm.get('mensaje')?.dirty)"
                    placeholder="Tu mensaje"
                    formControlName="mensaje"
                    id="mensaje"
                    style="height: 150px; resize: none;"
                  ></textarea>
                  <label for="mensaje" class="text-morado-oscuro"
                    >Mensaje</label
                  >
                  @if (contactForm.get('mensaje')?.errors?.['required'] && (contactForm.get('mensaje')?.touched || contactForm.get('mensaje')?.dirty)) {
                      <div class="invalid-feedback">
                          El mensaje es obligatorio
                      </div>
                  }
                  @if (contactForm.get('mensaje')?.errors?.['minlength']) {
                      <div class="invalid-feedback">
                          El mensaje debe tener al menos 10 caracteres
                      </div>
                  }
                  @if (contactForm.get('mensaje')?.errors?.['maxlength'] && (contactForm.get('mensaje')?.touched || contactForm.get('mensaje')?.dirty)) {
                    <div class="invalid-feedback">
                      El mensaje no puede superar los 500 caracteres.
                    </div>
                  }
                </div>
              </div>

               <!-- AceptaPolitica -->
              <div class="col-12">
                <div class="form-check">
                  <input
                    class="form-check-input border-morado-intermedio-1"
                    [class.is-invalid]="contactForm.get('aceptaPolitica')?.invalid && (contactForm.get('aceptaPolitica')?.touched || contactForm.get('aceptaPolitica')?.dirty)"
                    type="checkbox"
                    formControlName="aceptaPolitica"
                    id="politica"
                  />
                  <label
                    class="form-check-label text-morado-oscuro"
                    for="politica"
                  >
                    He leído y acepto la política de privacidad
                  </label>
                  @if (contactForm.get('aceptaPolitica')?.errors?.['required'] && (contactForm.get('aceptaPolitica')?.touched || contactForm.get('aceptaPolitica')?.dirty)) {
                      <div class="invalid-feedback">
                          Debes aceptar la política de privacidad
                      </div>
                  }
                </div>
              </div>

              <div class="col-12 text-center">
                <button
                  type="submit"
                  class="btnSinIcono py-3 px-5 mt-3"
                  style="width: auto"
                >
                  Enviar mensaje
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Mapa -->
  <div class="row mt-5">
    <div class="col-12">
      <div class="card border-morado-intermedio-1 rounded-4 overflow-hidden">
        <div class="card-body p-0">
          <iframe
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3071.0381140964855!2d-0.24929622362604614!3d39.67135720066732!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0xd601595e84d50b7%3A0xc249890fbcbd5291!2sIES%20Camp%20de%20Morvedre!5e0!3m2!1ses!2ses!4v1747664878746!5m2!1ses!2ses"
            width="100%"
            height="450"
            style="border: 0"
            allowfullscreen=""
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade"
          >
          </iframe>
        </div>
      </div>
    </div>
  </div>
</div>
