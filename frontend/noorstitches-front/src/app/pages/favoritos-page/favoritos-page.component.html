<div class="container py-5 separacion-header-home">
  <div class="row mb-5">
    <div class="col-12">
      <div class="row p-0 m-0 divider-con-borde">
        <p class="h3 text-morado-intermedio-1 extrabold">Mis Favoritos</p>
      </div>
    </div>
  </div>

  <!-- Estadísticas y filtros -->
  <!-- <div class="row mb-4">
    <div class="col-md-6">
      <div class="d-flex align-items-center">
        <span class="badge bg-morado-intermedio-1 text-blanco rounded-pill me-3">2 productos</span>
        <span class="text-morado-oscuro medium">en tu lista de favoritos</span>
      </div>
    </div>

    <div class="col-md-6">
      <div class="d-flex gap-2 justify-content-md-end">
        <select class="form-select border-morado-intermedio-1" style="width: auto;">
          <option value="">Todas las categorías</option>
          <option value="amigurumi">Amigurumi</option>
          <option value="ropa">Ropa</option>
          <option value="hogar">Hogar</option>
          <option value="accesorios">Accesorios</option>
        </select>
        <select class="form-select border-morado-intermedio-1" style="width: auto;">
          <option value="reciente">Más recientes</option>
          <option value="precio_asc">Precio: menor a mayor</option>
          <option value="precio_desc">Precio: mayor a menor</option>
          <option value="nombre">Nombre A-Z</option>
        </select>
      </div>
    </div>
  </div> -->

  <!-- Grid de productos favoritos -->
  <div
    class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4 d-flex justify-content-center"
  >
    @if (listaProductosFavoritos().length === 0) {
    <div class="col-12 text-center">
      <p class="text-muted">No tienes productos favoritos aún :(</p>
    </div>
    } @else { @for (producto of listaProductosFavoritos(); track producto.id) {
    <a
      class="tarjeta-producto text-decoration-none"
      [routerLink]="['/productos', producto.id]"
      [state]="{ origen: 'favoritos' }"
    >
      <div
        class="w-100"
        style="aspect-ratio: 4/3; overflow: hidden; border-radius: 1rem"
      >
        @if (producto.urlImagen != null) {
        <img
          src="{{ producto.urlImagen }}"
          alt="{{ producto.nombre }}"
          class="img-fluid w-100 h-100 object-fit-cover p-3 rounded-5"
        />
        } @else {
        <img
          src="http://localhost:8888/imgs/productos/por_defecto.webp"
          alt="{{ producto.nombre }}"
          class="img-fluid w-100 h-100 object-fit-cover p-3 rounded-5"
        />
        }
      </div>
      <div class="d-flex flex-column gap-2 mt-2 px-3">
        <h4 class="text-black medium text-break mt-3">{{ producto.nombre }}</h4>
        <div class="d-flex justify-content-between align-items-center m-0 p-0">
          <p class="text-black bold fs-4">
            {{ producto.precio ?? 0 | precioEuro }}
          </p>
          @if (listaIdProductosFavoritos().includes(producto.id!)) {
          <button
            type="button"
            class="btn-link bg-transparent border-0 p-0 m-0 cursor-pointer"
            (click)="
              $event.preventDefault();
              $event.stopPropagation();
              favorito(producto.id!)
            "
          >
            <mat-icon class="text-morado-intermedio-1">favorite</mat-icon>
          </button>
          } @else {
          <button
            type="button"
            class="btn-link bg-transparent border-0 p-0 m-0 cursor-pointer"
            (click)="
              $event.preventDefault();
              $event.stopPropagation();
              favorito(producto.id!)
            "
          >
            <span class="material-symbols-outlined text-morado-intermedio-1"
              >favorite</span
            >
          </button>
          }
        </div>
      </div>
    </a>
    } }
  </div>

  <!-- Acciones adicionales -->
  <!-- <div class="row mt-5">
    <div class="col-12">
      <div class="card border-morado-intermedio-1 rounded-4 p-4">
        <div class="card-body text-center">
          <h5 class="text-morado-oscuro bold mb-3">¿Te gustan estos productos?</h5>
          <p class="text-morado-oscuro mb-4">
            Comparte tu lista de favoritos con amigos o guárdala para más tarde.
          </p>
          <div class="d-flex flex-column flex-md-row gap-3 justify-content-center">
            <button class="btnSinIcono" style="width: auto; padding: 10px 20px;">
              <span class="material-icons me-2">share</span>
              Compartir lista
            </button>
            <button class="btnSinIcono" style="width: auto; padding: 10px 20px; background-color: var(--blanco); color: var(--morado-intermedio-1);">
              <span class="material-icons me-2">add_shopping_cart</span>
              Añadir todos al carrito
            </button>
            <button class="btn btn-outline-danger" style="width: auto; padding: 10px 20px;">
              <span class="material-icons me-2">clear_all</span>
              Limpiar lista
            </button>
          </div>
        </div>
      </div>
    </div>
  </div> -->
</div>
